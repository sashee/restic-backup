# Maintainer: Tamas Sallai <tamas.sallai@advancedweb.hu>
pkgname="restic-backup-client"
pkgver="0.0.1"
pkgrel="1"
pkgdesc="Restic backup to an S3-compatible storage"
arch=(any)
license=("custom")
url="https://github.com/sashee/restic-backup"
source=("index.js" "package.json" "package-lock.json" "restic-backup-client@.service" "restic-backup-client@.timer")
depends=('nodejs' 'restic')
makedepends=('npm')
sha512sums=("SKIP" "SKIP" "SKIP" "SKIP" "SKIP")

build() {
	npm ci
}

package() {
  mkdir -p "${pkgdir}/usr/lib/restic-backup-client"
  cp -Lr "${srcdir}/." "${pkgdir}/usr/lib/restic-backup-client"
  mkdir -p "${pkgdir}/etc/systemd/system"
	cp "${srcdir}/restic-backup-client@.service" "${pkgdir}/etc/systemd/system"
	cp "${srcdir}/restic-backup-client@.timer" "${pkgdir}/etc/systemd/system"
}

